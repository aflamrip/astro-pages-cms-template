---
import { getCollection } from 'astro:content';

const movies = await getCollection('movies');
const series = await getCollection('series');
const episodes = await getCollection('episodes');
---

<!-- قسم الأفلام الرئيسية -->
<section class="movies-slider my-8 max-w-6xl mx-auto">
  <h2 class="text-3xl font-bold mb-4">أحدث الأفلام</h2>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    {movies
      .filter(m => m.data.title && m.data.poster)
      .slice(0, 8)
      .map(movie => (
        <a href={`/movies/${movie.slug}`} class="hover:scale-105 transition-transform">
          <img src={movie.data.poster} alt={movie.data.title} class="rounded-lg shadow-md" />
          <p class="text-center mt-2 font-semibold">{movie.data.title}</p>
        </a>
      ))}
  </div>
</section>

<!-- قسم المسلسلات -->
<section class="series-slider my-8 max-w-6xl mx-auto">
  <h2 class="text-3xl font-bold mb-4">المسلسلات</h2>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    {series
      .filter(s => s.data.title && s.data.poster)
      .slice(0, 8)
      .map(s => (
        <a href={`/series/${s.slug}`} class="hover:scale-105 transition-transform">
          <img src={s.data.poster} alt={s.data.title} class="rounded-lg shadow-md" />
          <p class="text-center mt-2 font-semibold">{s.data.title}</p>
        </a>
      ))}
  </div>
</section>

<!-- قسم أحدث الحلقات -->
<section class="latest-episodes my-8 max-w-6xl mx-auto">
  <h2 class="text-3xl font-bold mb-4">أحدث الحلقات</h2>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    {episodes
      .filter(ep => ep.data.title && ep.data.poster && ep.data.seriesSlug)
      .slice(0, 8)
      .map(ep => (
        <a href={`/series/${ep.data.seriesSlug}/episode/${ep.slug}`} class="hover:scale-105 transition-transform">
          <img src={ep.data.poster} alt={ep.data.title} class="rounded-lg shadow-md"/>
          <p class="text-center mt-2 font-semibold">{ep.data.title}</p>
        </a>
      ))}
  </div>
</section>
