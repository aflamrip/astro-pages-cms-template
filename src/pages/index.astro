---
import { getCollection } from 'astro:content';
import Swiper from '@swiper/js';

const movies = await getCollection('movies');
const series = await getCollection('series');
const latestEpisodes = await getCollection('episodes');

---

<!-- Slider -->
<section class="slider">
  <Swiper>
    {movies.slice(0,5).map(movie => (
      <div class="swiper-slide">
        <a href={`/movies/${movie.slug}`}>
          <img src={movie.data.poster} alt={movie.data.title} />
          <h2>{movie.data.title}</h2>
        </a>
      </div>
    ))}
  </Swiper>
</section>

<!-- Latest Episodes -->
<section class="latest-episodes">
  <h2>أحدث الحلقات</h2>
  <div class="grid">
    {latestEpisodes.map(ep => (
      <a href={`/series/${ep.data.seriesSlug}/episode/${ep.slug}`}>
        <img src={ep.data.poster} alt={ep.data.title} />
        <p>{ep.data.title}</p>
      </a>
    ))}
  </div>
</section>

<!-- Movies -->
<section class="movies">
  <h2>الأفلام</h2>
  <div class="grid">
    {movies.map(movie => (
      <a href={`/movies/${movie.slug}`}>
        <img src={movie.data.poster} alt={movie.data.title} />
        <p>{movie.data.title}</p>
      </a>
    ))}
  </div>
</section>

<!-- Series -->
<section class="series">
  <h2>المسلسلات</h2>
  <div class="grid">
    {series.map(s => (
      <a href={`/series/${s.slug}`}>
        <img src={s.data.poster} alt={s.data.title} />
        <p>{s.data.title}</p>
      </a>
    ))}
  </div>
</section>
