---
const { videoUrl, embedUrl } = Astro.props;
---

<div class="video-player">
  {embedUrl ? (
    <iframe src={embedUrl} frameborder="0" allowfullscreen></iframe>
  ) : videoUrl ? (
    <video id="player" controls>
      <source src={videoUrl} type={videoUrl.includes('.m3u8') ? 'application/x-mpegURL' : 'video/mp4'} />
    </video>
  ) : (
    <p style="color: red;">لا يوجد رابط فيديو متاح</p>
  )}
</div>

<style>
  .video-player { width: 100%; max-width: 800px; margin: 20px auto; }
  .video-player iframe, .video-player video { width: 100%; height: 450px; border-radius: 8px; }
</style>

<script>
  import Plyr from 'plyr';
  import 'plyr/dist/plyr.css';
  
  const video = document.getElementById('player');
  if (video && !video.closest('iframe')) {
    new Plyr(video);
  }
</script>
